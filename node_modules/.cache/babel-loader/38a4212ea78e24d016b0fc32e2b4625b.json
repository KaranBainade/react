{"ast":null,"code":"/**\n * Copyright (c) 2017-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { uuid } from './Utils';\n\nvar injectScriptTag = function (scriptId, doc, url, callback) {\n  var scriptTag = doc.createElement('script');\n  scriptTag.referrerPolicy = 'origin';\n  scriptTag.type = 'application/javascript';\n  scriptTag.id = scriptId;\n  scriptTag.addEventListener('load', callback);\n  scriptTag.src = url;\n\n  if (doc.head) {\n    doc.head.appendChild(scriptTag);\n  }\n};\n\nexport var create = function () {\n  return {\n    listeners: [],\n    scriptId: uuid('tiny-script'),\n    scriptLoaded: false\n  };\n};\nexport var load = function (state, doc, url, callback) {\n  if (state.scriptLoaded) {\n    callback();\n  } else {\n    state.listeners.push(callback);\n\n    if (!doc.getElementById(state.scriptId)) {\n      injectScriptTag(state.scriptId, doc, url, function () {\n        state.listeners.forEach(function (fn) {\n          return fn();\n        });\n        state.scriptLoaded = true;\n      });\n    }\n  }\n};","map":{"version":3,"sources":["D:/React JS Projects/tinymce-react-demo/node_modules/@tinymce/tinymce-react/lib/es2015/main/ts/ScriptLoader.js"],"names":["uuid","injectScriptTag","scriptId","doc","url","callback","scriptTag","createElement","referrerPolicy","type","id","addEventListener","src","head","appendChild","create","listeners","scriptLoaded","load","state","push","getElementById","forEach","fn"],"mappings":"AAAA;;;;;;;AAOA,SAASA,IAAT,QAAqB,SAArB;;AACA,IAAIC,eAAe,GAAG,UAAUC,QAAV,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,QAA9B,EAAwC;AAC1D,MAAIC,SAAS,GAAGH,GAAG,CAACI,aAAJ,CAAkB,QAAlB,CAAhB;AACAD,EAAAA,SAAS,CAACE,cAAV,GAA2B,QAA3B;AACAF,EAAAA,SAAS,CAACG,IAAV,GAAiB,wBAAjB;AACAH,EAAAA,SAAS,CAACI,EAAV,GAAeR,QAAf;AACAI,EAAAA,SAAS,CAACK,gBAAV,CAA2B,MAA3B,EAAmCN,QAAnC;AACAC,EAAAA,SAAS,CAACM,GAAV,GAAgBR,GAAhB;;AACA,MAAID,GAAG,CAACU,IAAR,EAAc;AACVV,IAAAA,GAAG,CAACU,IAAJ,CAASC,WAAT,CAAqBR,SAArB;AACH;AACJ,CAVD;;AAWA,OAAO,IAAIS,MAAM,GAAG,YAAY;AAC5B,SAAO;AACHC,IAAAA,SAAS,EAAE,EADR;AAEHd,IAAAA,QAAQ,EAAEF,IAAI,CAAC,aAAD,CAFX;AAGHiB,IAAAA,YAAY,EAAE;AAHX,GAAP;AAKH,CANM;AAOP,OAAO,IAAIC,IAAI,GAAG,UAAUC,KAAV,EAAiBhB,GAAjB,EAAsBC,GAAtB,EAA2BC,QAA3B,EAAqC;AACnD,MAAIc,KAAK,CAACF,YAAV,EAAwB;AACpBZ,IAAAA,QAAQ;AACX,GAFD,MAGK;AACDc,IAAAA,KAAK,CAACH,SAAN,CAAgBI,IAAhB,CAAqBf,QAArB;;AACA,QAAI,CAACF,GAAG,CAACkB,cAAJ,CAAmBF,KAAK,CAACjB,QAAzB,CAAL,EAAyC;AACrCD,MAAAA,eAAe,CAACkB,KAAK,CAACjB,QAAP,EAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B,YAAY;AAClDe,QAAAA,KAAK,CAACH,SAAN,CAAgBM,OAAhB,CAAwB,UAAUC,EAAV,EAAc;AAAE,iBAAOA,EAAE,EAAT;AAAc,SAAtD;AACAJ,QAAAA,KAAK,CAACF,YAAN,GAAqB,IAArB;AACH,OAHc,CAAf;AAIH;AACJ;AACJ,CAbM","sourcesContent":["/**\n * Copyright (c) 2017-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { uuid } from './Utils';\nvar injectScriptTag = function (scriptId, doc, url, callback) {\n    var scriptTag = doc.createElement('script');\n    scriptTag.referrerPolicy = 'origin';\n    scriptTag.type = 'application/javascript';\n    scriptTag.id = scriptId;\n    scriptTag.addEventListener('load', callback);\n    scriptTag.src = url;\n    if (doc.head) {\n        doc.head.appendChild(scriptTag);\n    }\n};\nexport var create = function () {\n    return {\n        listeners: [],\n        scriptId: uuid('tiny-script'),\n        scriptLoaded: false\n    };\n};\nexport var load = function (state, doc, url, callback) {\n    if (state.scriptLoaded) {\n        callback();\n    }\n    else {\n        state.listeners.push(callback);\n        if (!doc.getElementById(state.scriptId)) {\n            injectScriptTag(state.scriptId, doc, url, function () {\n                state.listeners.forEach(function (fn) { return fn(); });\n                state.scriptLoaded = true;\n            });\n        }\n    }\n};\n"]},"metadata":{},"sourceType":"module"}